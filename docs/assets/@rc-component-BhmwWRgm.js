import{c as cr}from"./classnames-C6I1OsXt.js";import{r as s}from"./react-BwYbncKq.js";import{c as Yr,u as K,d as sn,a as fn,r as $t,s as Xr,e as Yt,f as cn,h as ln,i as vn,j as Ue,k as Mt,l as dn,g as xt,m as hn,n as mn,o as gn}from"./rc-util-qpEr0zEL.js";import{h as Xt,i as pt,a as Rt,_ as Nt,k as At,e as R,d as Pe,c as T,f as De,b as Ie,j as Lt,l as yn,g as xr}from"./@babel-C_SyoEfJ.js";import{F as en}from"./@ant-design-BDIhShda.js";import{r as rn}from"./react-dom-CYoFxZK3.js";import{R as tn}from"./rc-resize-observer-Djs7foYh.js";import{C as nn}from"./rc-motion-fdt2-AWL.js";var bn=["b"],wn=["v"],St=function(e){return Math.round(Number(e||0))},Cn=function(e){if(e instanceof en)return e;if(e&&Pe(e)==="object"&&"h"in e&&"b"in e){var r=e,n=r.b,a=At(r,bn);return R(R({},a),{},{v:n})}return typeof e=="string"&&/hsb/.test(e)?e.replace(/hsb/,"hsv"):e},kt=function(t){Xt(r,t);var e=pt(r);function r(n){return Rt(this,r),e.call(this,Cn(n))}return Nt(r,[{key:"toHsbString",value:function(){var a=this.toHsb(),i=St(a.s*100),o=St(a.b*100),u=St(a.h),v=a.a,g="hsb(".concat(u,", ").concat(i,"%, ").concat(o,"%)"),m="hsba(".concat(u,", ").concat(i,"%, ").concat(o,"%, ").concat(v.toFixed(v===0?0:2),")");return v===1?g:m}},{key:"toHsb",value:function(){var a=this.toHsv(),i=a.v,o=At(a,wn);return R(R({},o),{},{b:i,a:this.a})}}]),r}(en),Sn=function(e){return e instanceof kt?e:new kt(e)};Sn("#1677ff");var an=s.createContext(null),Ht=[];function Pn(t,e){var r=s.useState(function(){if(!Yr())return null;var c=document.createElement("div");return c}),n=T(r,1),a=n[0],i=s.useRef(!1),o=s.useContext(an),u=s.useState(Ht),v=T(u,2),g=v[0],m=v[1],l=o||(i.current?void 0:function(c){m(function(C){var f=[c].concat(De(C));return f})});function b(){a.parentElement||document.body.appendChild(a),i.current=!0}function h(){var c;(c=a.parentElement)===null||c===void 0||c.removeChild(a),i.current=!1}return K(function(){return t?o?o(b):b():h(),h},[t]),K(function(){g.length&&(g.forEach(function(c){return c()}),m(Ht))},[g]),[a,l]}function Mn(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var xn="rc-util-locker-".concat(Date.now()),jt=0;function qn(t){var e=!!t,r=s.useState(function(){return jt+=1,"".concat(xn,"_").concat(jt)}),n=T(r,1),a=n[0];K(function(){if(e){var i=sn(document.body).width,o=Mn();fn(`
html body {
  overflow-y: hidden;
  `.concat(o?"width: calc(100% - ".concat(i,"px);"):"",`
}`),a)}else $t(a);return function(){$t(a)}},[e,a])}var Fn=!1;function En(t){return Fn}var Vt=function(e){return e===!1?!1:!Yr()||!e?null:typeof e=="string"?document.querySelector(e):typeof e=="function"?e():e},on=s.forwardRef(function(t,e){var r=t.open,n=t.autoLock,a=t.getContainer;t.debug;var i=t.autoDestroy,o=i===void 0?!0:i,u=t.children,v=s.useState(r),g=T(v,2),m=g[0],l=g[1],b=m||r;s.useEffect(function(){(o||r)&&l(r)},[r,o]);var h=s.useState(function(){return Vt(a)}),c=T(h,2),C=c[0],f=c[1];s.useEffect(function(){var G=Vt(a);f(G??null)});var M=Pn(b&&!C),S=T(M,2),P=S[0],F=S[1],q=C??P;qn(n&&r&&Yr()&&(q===P||q===document.body));var y=null;if(u&&Xr(u)&&e){var $=u;y=$.ref}var V=Yt(y,e);if(!b||!Yr()||C===void 0)return null;var W=q===!1||En(),U=u;return e&&(U=s.cloneElement(u,{ref:V})),s.createElement(an.Provider,{value:F},W?U:rn.createPortal(U,q))});function qt(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var Ft=qt(),Dn=/%[sdj%]/g,Rn=function(){};function Et(t){if(!t||!t.length)return null;var e={};return t.forEach(function(r){var n=r.field;e[n]=e[n]||[],e[n].push(r)}),e}function ae(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];var a=0,i=r.length;if(typeof t=="function")return t.apply(null,r);if(typeof t=="string"){var o=t.replace(Dn,function(u){if(u==="%%")return"%";if(a>=i)return u;switch(u){case"%s":return String(r[a++]);case"%d":return Number(r[a++]);case"%j":try{return JSON.stringify(r[a++])}catch{return"[Circular]"}break;default:return u}});return o}return t}function Nn(t){return t==="string"||t==="url"||t==="hex"||t==="email"||t==="date"||t==="pattern"}function _(t,e){return!!(t==null||e==="array"&&Array.isArray(t)&&!t.length||Nn(e)&&typeof t=="string"&&!t)}function An(t,e,r){var n=[],a=0,i=t.length;function o(u){n.push.apply(n,De(u||[])),a++,a===i&&r(n)}t.forEach(function(u){e(u,o)})}function Wt(t,e,r){var n=0,a=t.length;function i(o){if(o&&o.length){r(o);return}var u=n;n=n+1,u<a?e(t[u],i):r([])}i([])}function Tn(t){var e=[];return Object.keys(t).forEach(function(r){e.push.apply(e,De(t[r]||[]))}),e}var zt=function(t){Xt(r,t);var e=pt(r);function r(n,a){var i;return Rt(this,r),i=e.call(this,"Async Validation Error"),Ie(Lt(i),"errors",void 0),Ie(Lt(i),"fields",void 0),i.errors=n,i.fields=a,i}return Nt(r)}(yn(Error));function $n(t,e,r,n,a){if(e.first){var i=new Promise(function(b,h){var c=function(M){return n(M),M.length?h(new zt(M,Et(M))):b(a)},C=Tn(t);Wt(C,r,c)});return i.catch(function(b){return b}),i}var o=e.firstFields===!0?Object.keys(t):e.firstFields||[],u=Object.keys(t),v=u.length,g=0,m=[],l=new Promise(function(b,h){var c=function(f){if(m.push.apply(m,f),g++,g===v)return n(m),m.length?h(new zt(m,Et(m))):b(a)};u.length||(n(m),b(a)),u.forEach(function(C){var f=t[C];o.indexOf(C)!==-1?Wt(f,r,c):An(f,r,c)})});return l.catch(function(b){return b}),l}function Ln(t){return!!(t&&t.message!==void 0)}function kn(t,e){for(var r=t,n=0;n<e.length;n++){if(r==null)return r;r=r[e[n]]}return r}function Bt(t,e){return function(r){var n;return t.fullFields?n=kn(e,t.fullFields):n=e[r.field||t.fullField],Ln(r)?(r.field=r.field||t.fullField,r.fieldValue=n,r):{message:typeof r=="function"?r():r,fieldValue:n,field:r.field||t.fullField}}}function _t(t,e){if(e){for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];Pe(n)==="object"&&Pe(t[r])==="object"?t[r]=R(R({},t[r]),n):t[r]=n}}return t}var sr="enum",Hn=function(e,r,n,a,i){e[sr]=Array.isArray(e[sr])?e[sr]:[],e[sr].indexOf(r)===-1&&a.push(ae(i.messages[sr],e.fullField,e[sr].join(", ")))},jn=function(e,r,n,a,i){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(r)||a.push(ae(i.messages.pattern.mismatch,e.fullField,r,e.pattern));else if(typeof e.pattern=="string"){var o=new RegExp(e.pattern);o.test(r)||a.push(ae(i.messages.pattern.mismatch,e.fullField,r,e.pattern))}}},Vn=function(e,r,n,a,i){var o=typeof e.len=="number",u=typeof e.min=="number",v=typeof e.max=="number",g=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,m=r,l=null,b=typeof r=="number",h=typeof r=="string",c=Array.isArray(r);if(b?l="number":h?l="string":c&&(l="array"),!l)return!1;c&&(m=r.length),h&&(m=r.replace(g,"_").length),o?m!==e.len&&a.push(ae(i.messages[l].len,e.fullField,e.len)):u&&!v&&m<e.min?a.push(ae(i.messages[l].min,e.fullField,e.min)):v&&!u&&m>e.max?a.push(ae(i.messages[l].max,e.fullField,e.max)):u&&v&&(m<e.min||m>e.max)&&a.push(ae(i.messages[l].range,e.fullField,e.min,e.max))},un=function(e,r,n,a,i,o){e.required&&(!n.hasOwnProperty(e.field)||_(r,o||e.type))&&a.push(ae(i.messages.required,e.fullField))},Or;const Wn=function(){if(Or)return Or;var t="[a-fA-F\\d:]",e=function(y){return y&&y.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(t,")|(?<=").concat(t,")(?=\\s|$))"):""},r="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",n="[a-fA-F\\d]{1,4}",a=["(?:".concat(n,":){7}(?:").concat(n,"|:)"),"(?:".concat(n,":){6}(?:").concat(r,"|:").concat(n,"|:)"),"(?:".concat(n,":){5}(?::").concat(r,"|(?::").concat(n,"){1,2}|:)"),"(?:".concat(n,":){4}(?:(?::").concat(n,"){0,1}:").concat(r,"|(?::").concat(n,"){1,3}|:)"),"(?:".concat(n,":){3}(?:(?::").concat(n,"){0,2}:").concat(r,"|(?::").concat(n,"){1,4}|:)"),"(?:".concat(n,":){2}(?:(?::").concat(n,"){0,3}:").concat(r,"|(?::").concat(n,"){1,5}|:)"),"(?:".concat(n,":){1}(?:(?::").concat(n,"){0,4}:").concat(r,"|(?::").concat(n,"){1,6}|:)"),"(?::(?:(?::".concat(n,"){0,5}:").concat(r,"|(?::").concat(n,"){1,7}|:))")],i="(?:%[0-9a-zA-Z]{1,})?",o="(?:".concat(a.join("|"),")").concat(i),u=new RegExp("(?:^".concat(r,"$)|(?:^").concat(o,"$)")),v=new RegExp("^".concat(r,"$")),g=new RegExp("^".concat(o,"$")),m=function(y){return y&&y.exact?u:new RegExp("(?:".concat(e(y)).concat(r).concat(e(y),")|(?:").concat(e(y)).concat(o).concat(e(y),")"),"g")};m.v4=function(q){return q&&q.exact?v:new RegExp("".concat(e(q)).concat(r).concat(e(q)),"g")},m.v6=function(q){return q&&q.exact?g:new RegExp("".concat(e(q)).concat(o).concat(e(q)),"g")};var l="(?:(?:[a-z]+:)?//)",b="(?:\\S+(?::\\S*)?@)?",h=m.v4().source,c=m.v6().source,C="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",f="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",M="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",S="(?::\\d{2,5})?",P='(?:[/?#][^\\s"]*)?',F="(?:".concat(l,"|www\\.)").concat(b,"(?:localhost|").concat(h,"|").concat(c,"|").concat(C).concat(f).concat(M,")").concat(S).concat(P);return Or=new RegExp("(?:^".concat(F,"$)"),"i"),Or};var Ut={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Mr={integer:function(e){return Mr.number(e)&&parseInt(e,10)===e},float:function(e){return Mr.number(e)&&!Mr.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return Pe(e)==="object"&&!Mr.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(Ut.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(Wn())},hex:function(e){return typeof e=="string"&&!!e.match(Ut.hex)}},zn=function(e,r,n,a,i){if(e.required&&r===void 0){un(e,r,n,a,i);return}var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],u=e.type;o.indexOf(u)>-1?Mr[u](r)||a.push(ae(i.messages.types[u],e.fullField,e.type)):u&&Pe(r)!==e.type&&a.push(ae(i.messages.types[u],e.fullField,e.type))},Bn=function(e,r,n,a,i){(/^\s+$/.test(r)||r==="")&&a.push(ae(i.messages.whitespace,e.fullField))};const x={required:un,whitespace:Bn,type:zn,range:Vn,enum:Hn,pattern:jn};var _n=function(e,r,n,a,i){var o=[],u=e.required||!e.required&&a.hasOwnProperty(e.field);if(u){if(_(r)&&!e.required)return n();x.required(e,r,a,o,i)}n(o)},Un=function(e,r,n,a,i){var o=[],u=e.required||!e.required&&a.hasOwnProperty(e.field);if(u){if(r==null&&!e.required)return n();x.required(e,r,a,o,i,"array"),r!=null&&(x.type(e,r,a,o,i),x.range(e,r,a,o,i))}n(o)},In=function(e,r,n,a,i){var o=[],u=e.required||!e.required&&a.hasOwnProperty(e.field);if(u){if(_(r)&&!e.required)return n();x.required(e,r,a,o,i),r!==void 0&&x.type(e,r,a,o,i)}n(o)},Jn=function(e,r,n,a,i){var o=[],u=e.required||!e.required&&a.hasOwnProperty(e.field);if(u){if(_(r,"date")&&!e.required)return n();if(x.required(e,r,a,o,i),!_(r,"date")){var v;r instanceof Date?v=r:v=new Date(r),x.type(e,v,a,o,i),v&&x.range(e,v.getTime(),a,o,i)}}n(o)},Qn="enum",Zn=function(e,r,n,a,i){var o=[],u=e.required||!e.required&&a.hasOwnProperty(e.field);if(u){if(_(r)&&!e.required)return n();x.required(e,r,a,o,i),r!==void 0&&x[Qn](e,r,a,o,i)}n(o)},Kn=function(e,r,n,a,i){var o=[],u=e.required||!e.required&&a.hasOwnProperty(e.field);if(u){if(_(r)&&!e.required)return n();x.required(e,r,a,o,i),r!==void 0&&(x.type(e,r,a,o,i),x.range(e,r,a,o,i))}n(o)},Gn=function(e,r,n,a,i){var o=[],u=e.required||!e.required&&a.hasOwnProperty(e.field);if(u){if(_(r)&&!e.required)return n();x.required(e,r,a,o,i),r!==void 0&&(x.type(e,r,a,o,i),x.range(e,r,a,o,i))}n(o)},On=function(e,r,n,a,i){var o=[],u=e.required||!e.required&&a.hasOwnProperty(e.field);if(u){if(_(r)&&!e.required)return n();x.required(e,r,a,o,i),r!==void 0&&x.type(e,r,a,o,i)}n(o)},Yn=function(e,r,n,a,i){var o=[],u=e.required||!e.required&&a.hasOwnProperty(e.field);if(u){if(r===""&&(r=void 0),_(r)&&!e.required)return n();x.required(e,r,a,o,i),r!==void 0&&(x.type(e,r,a,o,i),x.range(e,r,a,o,i))}n(o)},Xn=function(e,r,n,a,i){var o=[],u=e.required||!e.required&&a.hasOwnProperty(e.field);if(u){if(_(r)&&!e.required)return n();x.required(e,r,a,o,i),r!==void 0&&x.type(e,r,a,o,i)}n(o)},pn=function(e,r,n,a,i){var o=[],u=e.required||!e.required&&a.hasOwnProperty(e.field);if(u){if(_(r,"string")&&!e.required)return n();x.required(e,r,a,o,i),_(r,"string")||x.pattern(e,r,a,o,i)}n(o)},ea=function(e,r,n,a,i){var o=[],u=e.required||!e.required&&a.hasOwnProperty(e.field);if(u){if(_(r)&&!e.required)return n();x.required(e,r,a,o,i),_(r)||x.type(e,r,a,o,i)}n(o)},ra=function(e,r,n,a,i){var o=[],u=Array.isArray(r)?"array":Pe(r);x.required(e,r,a,o,i,u),n(o)},ta=function(e,r,n,a,i){var o=[],u=e.required||!e.required&&a.hasOwnProperty(e.field);if(u){if(_(r,"string")&&!e.required)return n();x.required(e,r,a,o,i,"string"),_(r,"string")||(x.type(e,r,a,o,i),x.range(e,r,a,o,i),x.pattern(e,r,a,o,i),e.whitespace===!0&&x.whitespace(e,r,a,o,i))}n(o)},Pt=function(e,r,n,a,i){var o=e.type,u=[],v=e.required||!e.required&&a.hasOwnProperty(e.field);if(v){if(_(r,o)&&!e.required)return n();x.required(e,r,a,u,i,o),_(r,o)||x.type(e,r,a,u,i)}n(u)};const qr={string:ta,method:On,number:Yn,boolean:In,regexp:ea,integer:Gn,float:Kn,array:Un,object:Xn,enum:Zn,pattern:pn,date:Jn,url:Pt,hex:Pt,email:Pt,required:ra,any:_n};var pr=function(){function t(e){Rt(this,t),Ie(this,"rules",null),Ie(this,"_messages",Ft),this.define(e)}return Nt(t,[{key:"define",value:function(r){var n=this;if(!r)throw new Error("Cannot configure a schema with no rules");if(Pe(r)!=="object"||Array.isArray(r))throw new Error("Rules must be an object");this.rules={},Object.keys(r).forEach(function(a){var i=r[a];n.rules[a]=Array.isArray(i)?i:[i]})}},{key:"messages",value:function(r){return r&&(this._messages=_t(qt(),r)),this._messages}},{key:"validate",value:function(r){var n=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},o=r,u=a,v=i;if(typeof u=="function"&&(v=u,u={}),!this.rules||Object.keys(this.rules).length===0)return v&&v(null,o),Promise.resolve(o);function g(c){var C=[],f={};function M(P){if(Array.isArray(P)){var F;C=(F=C).concat.apply(F,De(P))}else C.push(P)}for(var S=0;S<c.length;S++)M(c[S]);C.length?(f=Et(C),v(C,f)):v(null,o)}if(u.messages){var m=this.messages();m===Ft&&(m=qt()),_t(m,u.messages),u.messages=m}else u.messages=this.messages();var l={},b=u.keys||Object.keys(this.rules);b.forEach(function(c){var C=n.rules[c],f=o[c];C.forEach(function(M){var S=M;typeof S.transform=="function"&&(o===r&&(o=R({},o)),f=o[c]=S.transform(f),f!=null&&(S.type=S.type||(Array.isArray(f)?"array":Pe(f)))),typeof S=="function"?S={validator:S}:S=R({},S),S.validator=n.getValidationMethod(S),S.validator&&(S.field=c,S.fullField=S.fullField||c,S.type=n.getType(S),l[c]=l[c]||[],l[c].push({rule:S,value:f,source:o,field:c}))})});var h={};return $n(l,u,function(c,C){var f=c.rule,M=(f.type==="object"||f.type==="array")&&(Pe(f.fields)==="object"||Pe(f.defaultField)==="object");M=M&&(f.required||!f.required&&c.value),f.field=c.field;function S($,V){return R(R({},V),{},{fullField:"".concat(f.fullField,".").concat($),fullFields:f.fullFields?[].concat(De(f.fullFields),[$]):[$]})}function P(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],V=Array.isArray($)?$:[$];!u.suppressWarning&&V.length&&t.warning("async-validator:",V),V.length&&f.message!==void 0&&(V=[].concat(f.message));var W=V.map(Bt(f,o));if(u.first&&W.length)return h[f.field]=1,C(W);if(!M)C(W);else{if(f.required&&!c.value)return f.message!==void 0?W=[].concat(f.message).map(Bt(f,o)):u.error&&(W=[u.error(f,ae(u.messages.required,f.field))]),C(W);var U={};f.defaultField&&Object.keys(c.value).map(function(z){U[z]=f.defaultField}),U=R(R({},U),c.rule.fields);var G={};Object.keys(U).forEach(function(z){var j=U[z],de=Array.isArray(j)?j:[j];G[z]=de.map(S.bind(null,z))});var ie=new t(G);ie.messages(u.messages),c.rule.options&&(c.rule.options.messages=u.messages,c.rule.options.error=u.error),ie.validate(c.value,c.rule.options||u,function(z){var j=[];W&&W.length&&j.push.apply(j,De(W)),z&&z.length&&j.push.apply(j,De(z)),C(j.length?j:null)})}}var F;if(f.asyncValidator)F=f.asyncValidator(f,c.value,P,c.source,u);else if(f.validator){try{F=f.validator(f,c.value,P,c.source,u)}catch($){var q,y;(q=(y=console).error)===null||q===void 0||q.call(y,$),u.suppressValidatorError||setTimeout(function(){throw $},0),P($.message)}F===!0?P():F===!1?P(typeof f.message=="function"?f.message(f.fullField||f.field):f.message||"".concat(f.fullField||f.field," fails")):F instanceof Array?P(F):F instanceof Error&&P(F.message)}F&&F.then&&F.then(function(){return P()},function($){return P($)})},function(c){g(c)},o)}},{key:"getType",value:function(r){if(r.type===void 0&&r.pattern instanceof RegExp&&(r.type="pattern"),typeof r.validator!="function"&&r.type&&!qr.hasOwnProperty(r.type))throw new Error(ae("Unknown rule type %s",r.type));return r.type||"string"}},{key:"getValidationMethod",value:function(r){if(typeof r.validator=="function")return r.validator;var n=Object.keys(r),a=n.indexOf("message");return a!==-1&&n.splice(a,1),n.length===1&&n[0]==="required"?qr.required:qr[this.getType(r)]||void 0}}]),t}();Ie(pr,"register",function(e,r){if(typeof r!="function")throw new Error("Cannot register a validator by type, validator is not a function");qr[e]=r});Ie(pr,"warning",Rn);Ie(pr,"messages",Ft);Ie(pr,"validators",qr);function na(t){var e=t.prefixCls,r=t.align,n=t.arrow,a=t.arrowPos,i=n||{},o=i.className,u=i.content,v=a.x,g=v===void 0?0:v,m=a.y,l=m===void 0?0:m,b=s.useRef();if(!r||!r.points)return null;var h={position:"absolute"};if(r.autoArrow!==!1){var c=r.points[0],C=r.points[1],f=c[0],M=c[1],S=C[0],P=C[1];f===S||!["t","b"].includes(f)?h.top=l:f==="t"?h.top=0:h.bottom=0,M===P||!["l","r"].includes(M)?h.left=g:M==="l"?h.left=0:h.right=0}return s.createElement("div",{ref:b,className:cr("".concat(e,"-arrow"),o),style:h},u)}function aa(t){var e=t.prefixCls,r=t.open,n=t.zIndex,a=t.mask,i=t.motion;return a?s.createElement(nn,xr({},i,{motionAppear:!0,visible:r,removeOnLeave:!0}),function(o){var u=o.className;return s.createElement("div",{style:{zIndex:n},className:cr("".concat(e,"-mask"),u)})}):null}var ia=s.memo(function(t){var e=t.children;return e},function(t,e){return e.cache}),oa=s.forwardRef(function(t,e){var r=t.popup,n=t.className,a=t.prefixCls,i=t.style,o=t.target,u=t.onVisibleChanged,v=t.open,g=t.keepDom,m=t.fresh,l=t.onClick,b=t.mask,h=t.arrow,c=t.arrowPos,C=t.align,f=t.motion,M=t.maskMotion,S=t.forceRender,P=t.getPopupContainer,F=t.autoDestroy,q=t.portal,y=t.zIndex,$=t.onMouseEnter,V=t.onMouseLeave,W=t.onPointerEnter,U=t.onPointerDownCapture,G=t.ready,ie=t.offsetX,z=t.offsetY,j=t.offsetR,de=t.offsetB,I=t.onAlign,Z=t.onPrepare,E=t.stretch,he=t.targetWidth,ee=t.targetHeight,O=typeof r=="function"?r():r,D=v||g,Re=(P==null?void 0:P.length)>0,lr=s.useState(!P||!Re),Ne=T(lr,2),oe=Ne[0],vr=Ne[1];if(K(function(){!oe&&Re&&o&&vr(!0)},[oe,Re,o]),!oe)return null;var be="auto",re={left:"-1000vw",top:"-1000vh",right:be,bottom:be};if(G||!v){var Je,Qe=C.points,Ae=C.dynamicInset||((Je=C._experimental)===null||Je===void 0?void 0:Je.dynamicInset),we=Ae&&Qe[0][1]==="r",ue=Ae&&Qe[0][0]==="b";we?(re.right=j,re.left=be):(re.left=ie,re.right=be),ue?(re.bottom=de,re.top=be):(re.top=z,re.bottom=be)}var Y={};return E&&(E.includes("height")&&ee?Y.height=ee:E.includes("minHeight")&&ee&&(Y.minHeight=ee),E.includes("width")&&he?Y.width=he:E.includes("minWidth")&&he&&(Y.minWidth=he)),v||(Y.pointerEvents="none"),s.createElement(q,{open:S||D,getContainer:P&&function(){return P(o)},autoDestroy:F},s.createElement(aa,{prefixCls:a,open:v,zIndex:y,mask:b,motion:M}),s.createElement(tn,{onResize:I,disabled:!v},function(Me){return s.createElement(nn,xr({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:S,leavedClassName:"".concat(a,"-hidden")},f,{onAppearPrepare:Z,onEnterPrepare:Z,visible:v,onVisibleChanged:function($e){var te;f==null||(te=f.onVisibleChanged)===null||te===void 0||te.call(f,$e),u($e)}}),function(Te,$e){var te=Te.className,Ze=Te.style,se=cr(a,te,n);return s.createElement("div",{ref:cn(Me,e,$e),className:se,style:R(R(R(R({"--arrow-x":"".concat(c.x||0,"px"),"--arrow-y":"".concat(c.y||0,"px")},re),Y),Ze),{},{boxSizing:"border-box",zIndex:y},i),onMouseEnter:$,onMouseLeave:V,onPointerEnter:W,onClick:l,onPointerDownCapture:U},h&&s.createElement(na,{prefixCls:a,arrow:h,arrowPos:c,align:C}),s.createElement(ia,{cache:!v&&!m},O))})}))}),ua=s.forwardRef(function(t,e){var r=t.children,n=t.getTriggerDOMNode,a=Xr(r),i=s.useCallback(function(u){ln(e,n?n(u):u)},[n]),o=Yt(i,vn(r));return a?s.cloneElement(r,{ref:o}):r}),It=s.createContext(null);function Jt(t){return t?Array.isArray(t)?t:[t]:[]}function sa(t,e,r,n){return s.useMemo(function(){var a=Jt(r??e),i=Jt(n??e),o=new Set(a),u=new Set(i);return t&&(o.has("hover")&&(o.delete("hover"),o.add("click")),u.has("hover")&&(u.delete("hover"),u.add("click"))),[o,u]},[t,e,r,n])}function fa(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;return r?t[0]===e[0]:t[0]===e[0]&&t[1]===e[1]}function ca(t,e,r,n){for(var a=r.points,i=Object.keys(t),o=0;o<i.length;o+=1){var u,v=i[o];if(fa((u=t[v])===null||u===void 0?void 0:u.points,a,n))return"".concat(e,"-placement-").concat(v)}return""}function Qt(t,e,r,n){return e||(r?{motionName:"".concat(t,"-").concat(r)}:n?{motionName:n}:null)}function Er(t){return t.ownerDocument.defaultView}function Dt(t){for(var e=[],r=t==null?void 0:t.parentElement,n=["hidden","scroll","clip","auto"];r;){var a=Er(r).getComputedStyle(r),i=a.overflowX,o=a.overflowY,u=a.overflow;[i,o,u].some(function(v){return n.includes(v)})&&e.push(r),r=r.parentElement}return e}function Fr(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(t)?e:t}function Pr(t){return Fr(parseFloat(t),0)}function Zt(t,e){var r=R({},t);return(e||[]).forEach(function(n){if(!(n instanceof HTMLBodyElement||n instanceof HTMLHtmlElement)){var a=Er(n).getComputedStyle(n),i=a.overflow,o=a.overflowClipMargin,u=a.borderTopWidth,v=a.borderBottomWidth,g=a.borderLeftWidth,m=a.borderRightWidth,l=n.getBoundingClientRect(),b=n.offsetHeight,h=n.clientHeight,c=n.offsetWidth,C=n.clientWidth,f=Pr(u),M=Pr(v),S=Pr(g),P=Pr(m),F=Fr(Math.round(l.width/c*1e3)/1e3),q=Fr(Math.round(l.height/b*1e3)/1e3),y=(c-C-S-P)*F,$=(b-h-f-M)*q,V=f*q,W=M*q,U=S*F,G=P*F,ie=0,z=0;if(i==="clip"){var j=Pr(o);ie=j*F,z=j*q}var de=l.x+U-ie,I=l.y+V-z,Z=de+l.width+2*ie-U-G-y,E=I+l.height+2*z-V-W-$;r.left=Math.max(r.left,de),r.top=Math.max(r.top,I),r.right=Math.min(r.right,Z),r.bottom=Math.min(r.bottom,E)}}),r}function Kt(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r="".concat(e),n=r.match(/^(.*)\%$/);return n?t*(parseFloat(n[1])/100):parseFloat(r)}function Gt(t,e){var r=e||[],n=T(r,2),a=n[0],i=n[1];return[Kt(t.width,a),Kt(t.height,i)]}function Ot(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[t[0],t[1]]}function fr(t,e){var r=e[0],n=e[1],a,i;return r==="t"?i=t.y:r==="b"?i=t.y+t.height:i=t.y+t.height/2,n==="l"?a=t.x:n==="r"?a=t.x+t.width:a=t.x+t.width/2,{x:a,y:i}}function _e(t,e){var r={t:"b",b:"t",l:"r",r:"l"};return t.map(function(n,a){return a===e?r[n]||"c":n}).join("")}function la(t,e,r,n,a,i,o){var u=s.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:a[n]||{}}),v=T(u,2),g=v[0],m=v[1],l=s.useRef(0),b=s.useMemo(function(){return e?Dt(e):[]},[e]),h=s.useRef({}),c=function(){h.current={}};t||c();var C=Ue(function(){if(e&&r&&t){let ve=function(Cr,Ee){var Be=arguments.length>2&&arguments[2]!==void 0?arguments[2]:dr,Sr=D.x+Cr,Zr=D.y+Ee,yt=Sr+ue,bt=Zr+we,wt=Math.max(Sr,Be.left),d=Math.max(Zr,Be.top),w=Math.min(yt,Be.right),L=Math.min(bt,Be.bottom);return Math.max(0,(w-wt)*(L-d))},ur=function(){He=D.y+k,je=He+we,Xe=D.x+A,Fe=Xe+ue};var S,P,F,q,y=e,$=y.ownerDocument,V=Er(y),W=V.getComputedStyle(y),U=W.position,G=y.style.left,ie=y.style.top,z=y.style.right,j=y.style.bottom,de=y.style.overflow,I=R(R({},a[n]),i),Z=$.createElement("div");(S=y.parentElement)===null||S===void 0||S.appendChild(Z),Z.style.left="".concat(y.offsetLeft,"px"),Z.style.top="".concat(y.offsetTop,"px"),Z.style.position=U,Z.style.height="".concat(y.offsetHeight,"px"),Z.style.width="".concat(y.offsetWidth,"px"),y.style.left="0",y.style.top="0",y.style.right="auto",y.style.bottom="auto",y.style.overflow="hidden";var E;if(Array.isArray(r))E={x:r[0],y:r[1],width:0,height:0};else{var he,ee,O=r.getBoundingClientRect();O.x=(he=O.x)!==null&&he!==void 0?he:O.left,O.y=(ee=O.y)!==null&&ee!==void 0?ee:O.top,E={x:O.x,y:O.y,width:O.width,height:O.height}}var D=y.getBoundingClientRect(),Re=V.getComputedStyle(y),lr=Re.height,Ne=Re.width;D.x=(P=D.x)!==null&&P!==void 0?P:D.left,D.y=(F=D.y)!==null&&F!==void 0?F:D.top;var oe=$.documentElement,vr=oe.clientWidth,be=oe.clientHeight,re=oe.scrollWidth,Je=oe.scrollHeight,Qe=oe.scrollTop,Ae=oe.scrollLeft,we=D.height,ue=D.width,Y=E.height,Me=E.width,Te={left:0,top:0,right:vr,bottom:be},$e={left:-Ae,top:-Qe,right:re-Ae,bottom:Je-Qe},te=I.htmlRegion,Ze="visible",se="visibleFirst";te!=="scroll"&&te!==se&&(te=Ze);var Ke=te===se,et=Zt($e,b),N=Zt(Te,b),dr=te===Ze?N:et,J=Ke?N:dr;y.style.left="auto",y.style.top="auto",y.style.right="0",y.style.bottom="0";var Dr=y.getBoundingClientRect();y.style.left=G,y.style.top=ie,y.style.right=z,y.style.bottom=j,y.style.overflow=de,(q=y.parentElement)===null||q===void 0||q.removeChild(Z);var xe=Fr(Math.round(ue/parseFloat(Ne)*1e3)/1e3),Le=Fr(Math.round(we/parseFloat(lr)*1e3)/1e3);if(xe===0||Le===0||Mt(r)&&!dn(r))return;var rt=I.offset,Rr=I.targetOffset,Ce=Gt(D,rt),Nr=T(Ce,2),fe=Nr[0],me=Nr[1],ar=Gt(E,Rr),ne=T(ar,2),ke=ne[0],tt=ne[1];E.x-=ke,E.y-=tt;var nt=I.points||[],Ar=T(nt,2),at=Ar[0],Tr=Ar[1],qe=Ot(Tr),X=Ot(at),Q=fr(E,qe),$r=fr(D,X),ce=R({},I),A=Q.x-$r.x+fe,k=Q.y-$r.y+me,ge=ve(A,k),Ge=ve(A,k,N),le=fr(E,["t","l"]),Lr=fr(D,["t","l"]),hr=fr(E,["b","r"]),Oe=fr(D,["b","r"]),Ye=I.overflow||{},it=Ye.adjustX,kr=Ye.adjustY,ir=Ye.shiftX,mr=Ye.shiftY,Hr=function(Ee){return typeof Ee=="boolean"?Ee:Ee>=0},He,je,Xe,Fe;ur();var jr=Hr(kr),p=X[0]===qe[0];if(jr&&X[0]==="t"&&(je>J.bottom||h.current.bt)){var pe=k;p?pe-=we-Y:pe=le.y-Oe.y-me;var Vr=ve(A,pe),ot=ve(A,pe,N);Vr>ge||Vr===ge&&(!Ke||ot>=Ge)?(h.current.bt=!0,k=pe,me=-me,ce.points=[_e(X,0),_e(qe,0)]):h.current.bt=!1}if(jr&&X[0]==="b"&&(He<J.top||h.current.tb)){var er=k;p?er+=we-Y:er=hr.y-Lr.y-me;var Wr=ve(A,er),ut=ve(A,er,N);Wr>ge||Wr===ge&&(!Ke||ut>=Ge)?(h.current.tb=!0,k=er,me=-me,ce.points=[_e(X,0),_e(qe,0)]):h.current.tb=!1}var zr=Hr(it),Br=X[1]===qe[1];if(zr&&X[1]==="l"&&(Fe>J.right||h.current.rl)){var rr=A;Br?rr-=ue-Me:rr=le.x-Oe.x-fe;var tr=ve(rr,k),gr=ve(rr,k,N);tr>ge||tr===ge&&(!Ke||gr>=Ge)?(h.current.rl=!0,A=rr,fe=-fe,ce.points=[_e(X,1),_e(qe,1)]):h.current.rl=!1}if(zr&&X[1]==="r"&&(Xe<J.left||h.current.lr)){var nr=A;Br?nr+=ue-Me:nr=hr.x-Lr.x-fe;var yr=ve(nr,k),or=ve(nr,k,N);yr>ge||yr===ge&&(!Ke||or>=Ge)?(h.current.lr=!0,A=nr,fe=-fe,ce.points=[_e(X,1),_e(qe,1)]):h.current.lr=!1}ur();var ye=ir===!0?0:ir;typeof ye=="number"&&(Xe<N.left&&(A-=Xe-N.left-fe,E.x+Me<N.left+ye&&(A+=E.x-N.left+Me-ye)),Fe>N.right&&(A-=Fe-N.right-fe,E.x>N.right-ye&&(A+=E.x-N.right+ye)));var Ve=mr===!0?0:mr;typeof Ve=="number"&&(He<N.top&&(k-=He-N.top-me,E.y+Y<N.top+Ve&&(k+=E.y-N.top+Y-Ve)),je>N.bottom&&(k-=je-N.bottom-me,E.y>N.bottom-Ve&&(k+=E.y-N.bottom+Ve)));var We=D.x+A,ze=We+ue,br=D.y+k,st=br+we,_r=E.x,Ur=_r+Me,Ir=E.y,ft=Ir+Y,ct=Math.max(We,_r),Jr=Math.min(ze,Ur),lt=(ct+Jr)/2,vt=lt-We,Qr=Math.max(br,Ir),dt=Math.min(st,ft),ht=(Qr+dt)/2,mt=ht-br;o==null||o(e,ce);var Se=Dr.right-D.x-(A+D.width),wr=Dr.bottom-D.y-(k+D.height);xe===1&&(A=Math.round(A),Se=Math.round(Se)),Le===1&&(k=Math.round(k),wr=Math.round(wr));var gt={ready:!0,offsetX:A/xe,offsetY:k/Le,offsetR:Se/xe,offsetB:wr/Le,arrowX:vt/xe,arrowY:mt/Le,scaleX:xe,scaleY:Le,align:ce};m(gt)}}),f=function(){l.current+=1;var P=l.current;Promise.resolve().then(function(){l.current===P&&C()})},M=function(){m(function(P){return R(R({},P),{},{ready:!1})})};return K(M,[n]),K(function(){t||M()},[t]),[g.ready,g.offsetX,g.offsetY,g.offsetR,g.offsetB,g.arrowX,g.arrowY,g.scaleX,g.scaleY,g.align,f]}function va(t,e,r,n,a){K(function(){if(t&&e&&r){let l=function(){n(),a()};var i=e,o=r,u=Dt(i),v=Dt(o),g=Er(o),m=new Set([g].concat(De(u),De(v)));return m.forEach(function(b){b.addEventListener("scroll",l,{passive:!0})}),g.addEventListener("resize",l,{passive:!0}),n(),function(){m.forEach(function(b){b.removeEventListener("scroll",l),g.removeEventListener("resize",l)})}}},[t,e,r])}function da(t,e,r,n,a,i,o,u){var v=s.useRef(t);v.current=t;var g=s.useRef(!1);s.useEffect(function(){if(e&&n&&(!a||i)){var l=function(){g.current=!1},b=function(f){var M;v.current&&!o(((M=f.composedPath)===null||M===void 0||(M=M.call(f))===null||M===void 0?void 0:M[0])||f.target)&&!g.current&&u(!1)},h=Er(n);h.addEventListener("pointerdown",l,!0),h.addEventListener("mousedown",b,!0),h.addEventListener("contextmenu",b,!0);var c=xt(r);return c&&(c.addEventListener("mousedown",b,!0),c.addEventListener("contextmenu",b,!0)),function(){h.removeEventListener("pointerdown",l,!0),h.removeEventListener("mousedown",b,!0),h.removeEventListener("contextmenu",b,!0),c&&(c.removeEventListener("mousedown",b,!0),c.removeEventListener("contextmenu",b,!0))}}},[e,r,n,a,i]);function m(){g.current=!0}return m}var ha=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function ma(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:on,e=s.forwardRef(function(r,n){var a=r.prefixCls,i=a===void 0?"rc-trigger-popup":a,o=r.children,u=r.action,v=u===void 0?"hover":u,g=r.showAction,m=r.hideAction,l=r.popupVisible,b=r.defaultPopupVisible,h=r.onPopupVisibleChange,c=r.afterPopupVisibleChange,C=r.mouseEnterDelay,f=r.mouseLeaveDelay,M=f===void 0?.1:f,S=r.focusDelay,P=r.blurDelay,F=r.mask,q=r.maskClosable,y=q===void 0?!0:q,$=r.getPopupContainer,V=r.forceRender,W=r.autoDestroy,U=r.destroyPopupOnHide,G=r.popup,ie=r.popupClassName,z=r.popupStyle,j=r.popupPlacement,de=r.builtinPlacements,I=de===void 0?{}:de,Z=r.popupAlign,E=r.zIndex,he=r.stretch,ee=r.getPopupClassNameFromAlign,O=r.fresh,D=r.alignPoint,Re=r.onPopupClick,lr=r.onPopupAlign,Ne=r.arrow,oe=r.popupMotion,vr=r.maskMotion,be=r.popupTransitionName,re=r.popupAnimation,Je=r.maskTransitionName,Qe=r.maskAnimation,Ae=r.className,we=r.getTriggerDOMNode,ue=At(r,ha),Y=W||U||!1,Me=s.useState(!1),Te=T(Me,2),$e=Te[0],te=Te[1];K(function(){te(hn())},[]);var Ze=s.useRef({}),se=s.useContext(It),Ke=s.useMemo(function(){return{registerSubPopup:function(w,L){Ze.current[w]=L,se==null||se.registerSubPopup(w,L)}}},[se]),et=mn(),N=s.useState(null),dr=T(N,2),J=dr[0],Dr=dr[1],xe=s.useRef(null),Le=Ue(function(d){xe.current=d,Mt(d)&&J!==d&&Dr(d),se==null||se.registerSubPopup(et,d)}),rt=s.useState(null),Rr=T(rt,2),Ce=Rr[0],Nr=Rr[1],fe=s.useRef(null),me=Ue(function(d){Mt(d)&&Ce!==d&&(Nr(d),fe.current=d)}),ar=s.Children.only(o),ne=(ar==null?void 0:ar.props)||{},ke={},tt=Ue(function(d){var w,L,B=Ce;return(B==null?void 0:B.contains(d))||((w=xt(B))===null||w===void 0?void 0:w.host)===d||d===B||(J==null?void 0:J.contains(d))||((L=xt(J))===null||L===void 0?void 0:L.host)===d||d===J||Object.values(Ze.current).some(function(H){return(H==null?void 0:H.contains(d))||d===H})}),nt=Qt(i,oe,re,be),Ar=Qt(i,vr,Qe,Je),at=s.useState(b||!1),Tr=T(at,2),qe=Tr[0],X=Tr[1],Q=l??qe,$r=Ue(function(d){l===void 0&&X(d)});K(function(){X(l||!1)},[l]);var ce=s.useRef(Q);ce.current=Q;var A=s.useRef([]);A.current=[];var k=Ue(function(d){var w;$r(d),((w=A.current[A.current.length-1])!==null&&w!==void 0?w:Q)!==d&&(A.current.push(d),h==null||h(d))}),ge=s.useRef(),Ge=function(){clearTimeout(ge.current)},le=function(w){var L=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Ge(),L===0?k(w):ge.current=setTimeout(function(){k(w)},L*1e3)};s.useEffect(function(){return Ge},[]);var Lr=s.useState(!1),hr=T(Lr,2),Oe=hr[0],Ye=hr[1];K(function(d){(!d||Q)&&Ye(!0)},[Q]);var it=s.useState(null),kr=T(it,2),ir=kr[0],mr=kr[1],Hr=s.useState(null),He=T(Hr,2),je=He[0],Xe=He[1],Fe=function(w){Xe([w.clientX,w.clientY])},jr=la(Q,J,D&&je!==null?je:Ce,j,I,Z,lr),p=T(jr,11),pe=p[0],Vr=p[1],ot=p[2],er=p[3],Wr=p[4],ut=p[5],zr=p[6],Br=p[7],rr=p[8],tr=p[9],gr=p[10],nr=sa($e,v,g,m),yr=T(nr,2),or=yr[0],ye=yr[1],Ve=or.has("click"),We=ye.has("click")||ye.has("contextMenu"),ze=Ue(function(){Oe||gr()}),br=function(){ce.current&&D&&We&&le(!1)};va(Q,Ce,J,ze,br),K(function(){ze()},[je,j]),K(function(){Q&&!(I!=null&&I[j])&&ze()},[JSON.stringify(Z)]);var st=s.useMemo(function(){var d=ca(I,i,tr,D);return cr(d,ee==null?void 0:ee(tr))},[tr,ee,I,i,D]);s.useImperativeHandle(n,function(){return{nativeElement:fe.current,popupElement:xe.current,forceAlign:ze}});var _r=s.useState(0),Ur=T(_r,2),Ir=Ur[0],ft=Ur[1],ct=s.useState(0),Jr=T(ct,2),lt=Jr[0],vt=Jr[1],Qr=function(){if(he&&Ce){var w=Ce.getBoundingClientRect();ft(w.width),vt(w.height)}},dt=function(){Qr(),ze()},ht=function(w){Ye(!1),gr(),c==null||c(w)},mt=function(){return new Promise(function(w){Qr(),mr(function(){return w})})};K(function(){ir&&(gr(),ir(),mr(null))},[ir]);function Se(d,w,L,B){ke[d]=function(H){var Kr;B==null||B(H),le(w,L);for(var Ct=arguments.length,Tt=new Array(Ct>1?Ct-1:0),Gr=1;Gr<Ct;Gr++)Tt[Gr-1]=arguments[Gr];(Kr=ne[d])===null||Kr===void 0||Kr.call.apply(Kr,[ne,H].concat(Tt))}}(Ve||We)&&(ke.onClick=function(d){var w;ce.current&&We?le(!1):!ce.current&&Ve&&(Fe(d),le(!0));for(var L=arguments.length,B=new Array(L>1?L-1:0),H=1;H<L;H++)B[H-1]=arguments[H];(w=ne.onClick)===null||w===void 0||w.call.apply(w,[ne,d].concat(B))});var wr=da(Q,We,Ce,J,F,y,tt,le),gt=or.has("hover"),ve=ye.has("hover"),ur,Cr;gt&&(Se("onMouseEnter",!0,C,function(d){Fe(d)}),Se("onPointerEnter",!0,C,function(d){Fe(d)}),ur=function(w){(Q||Oe)&&J!==null&&J!==void 0&&J.contains(w.target)&&le(!0,C)},D&&(ke.onMouseMove=function(d){var w;(w=ne.onMouseMove)===null||w===void 0||w.call(ne,d)})),ve&&(Se("onMouseLeave",!1,M),Se("onPointerLeave",!1,M),Cr=function(){le(!1,M)}),or.has("focus")&&Se("onFocus",!0,S),ye.has("focus")&&Se("onBlur",!1,P),or.has("contextMenu")&&(ke.onContextMenu=function(d){var w;ce.current&&ye.has("contextMenu")?le(!1):(Fe(d),le(!0)),d.preventDefault();for(var L=arguments.length,B=new Array(L>1?L-1:0),H=1;H<L;H++)B[H-1]=arguments[H];(w=ne.onContextMenu)===null||w===void 0||w.call.apply(w,[ne,d].concat(B))}),Ae&&(ke.className=cr(ne.className,Ae));var Ee=s.useRef(!1);Ee.current||(Ee.current=V||Q||Oe);var Be=R(R({},ne),ke),Sr={},Zr=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];Zr.forEach(function(d){ue[d]&&(Sr[d]=function(){for(var w,L=arguments.length,B=new Array(L),H=0;H<L;H++)B[H]=arguments[H];(w=Be[d])===null||w===void 0||w.call.apply(w,[Be].concat(B)),ue[d].apply(ue,B)})});var yt=s.cloneElement(ar,R(R({},Be),Sr)),bt={x:ut,y:zr},wt=Ne?R({},Ne!==!0?Ne:{}):null;return s.createElement(s.Fragment,null,s.createElement(tn,{disabled:!Q,ref:me,onResize:dt},s.createElement(ua,{getTriggerDOMNode:we},yt)),Ee.current&&s.createElement(It.Provider,{value:Ke},s.createElement(oa,{portal:t,ref:Le,prefixCls:i,popup:G,className:cr(ie,st),style:z,target:Ce,onMouseEnter:ur,onMouseLeave:Cr,onPointerEnter:ur,zIndex:E,open:Q,keepDom:Oe,fresh:O,onClick:Re,onPointerDownCapture:wr,mask:F,motion:nt,maskMotion:Ar,onVisibleChanged:ht,onPrepare:mt,forceRender:V,autoDestroy:Y,getPopupContainer:$,align:tr,arrow:wt,arrowPos:bt,ready:pe,offsetX:Vr,offsetY:ot,offsetR:er,offsetB:Wr,onAlign:ze,stretch:he,targetWidth:Ir/Br,targetHeight:lt/rr})))});return e}const xa=ma(on);function qa(t){var e=s.createContext(void 0),r=function(a){var i=a.value,o=a.children,u=s.useRef(i);u.current=i;var v=s.useState(function(){return{getValue:function(){return u.current},listeners:new Set}}),g=T(v,1),m=g[0];return K(function(){rn.unstable_batchedUpdates(function(){m.listeners.forEach(function(l){l(i)})})},[i]),s.createElement(e.Provider,{value:m},o)};return{Context:e,Provider:r,defaultValue:t}}function Fa(t,e){var r=Ue(typeof e=="function"?e:function(l){if(e===void 0)return l;if(!Array.isArray(e))return l[e];var b={};return e.forEach(function(h){b[h]=l[h]}),b}),n=s.useContext(t==null?void 0:t.Context),a=n||{},i=a.listeners,o=a.getValue,u=s.useRef();u.current=r(n?o():t==null?void 0:t.defaultValue);var v=s.useState({}),g=T(v,2),m=g[1];return K(function(){if(!n)return;function l(b){var h=r(b);gn(u.current,h,!0)||m({})}return i.add(l),function(){i.delete(l)}},[n]),u.current}function Ea(){var t=s.createContext(null);function e(){return s.useContext(t)}function r(a,i){var o=Xr(a),u=function(g,m){var l=o?{ref:m}:{},b=s.useRef(0),h=s.useRef(g),c=e();return c!==null?s.createElement(a,xr({},g,l)):((!i||i(h.current,g))&&(b.current+=1),h.current=g,s.createElement(t.Provider,{value:b.current},s.createElement(a,xr({},g,l))))};return o?s.forwardRef(u):u}function n(a,i){var o=Xr(a),u=function(g,m){var l=o?{ref:m}:{};return e(),s.createElement(a,xr({},g,l))};return o?s.memo(s.forwardRef(u),i):s.memo(u,i)}return{makeImmutable:r,responseImmutable:n,useImmutableMark:e}}export{kt as C,on as P,pr as S,xa as T,qa as a,Ea as c,Fa as u};
