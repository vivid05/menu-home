var E=Object.defineProperty;var V=(t,s,n)=>s in t?E(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n;var B=(t,s,n)=>V(t,typeof s!="symbol"?s+"":s,n);import{r as h,j as e,a as F}from"./react-BwYbncKq.js";import{c as P}from"./react-dom-CYoFxZK3.js";import{T as R,S as A,s as c,C as O,B as x,F as W,a as k,M as q,b as w,I as Y,D as S,c as H,z as K}from"./antd-DQNjyfAT.js";import{D as Q}from"./dexie-CHToNQ8G.js";import{u as $,a as z,B as U,R as _,b as I}from"./react-router-DIMhQKeV.js";import{t as G,P as N,Q as T,T as X,U as D,V as Z}from"./@ant-design-BDIhShda.js";import{F as M}from"./@monaco-editor-BdY340vY.js";import"./@babel-C_SyoEfJ.js";import"./scheduler-DYLXRpC5.js";import"./rc-util-qpEr0zEL.js";import"./react-is-DcAOwtUU.js";import"./classnames-C6I1OsXt.js";import"./rc-resize-observer-Djs7foYh.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./rc-motion-fdt2-AWL.js";import"./@rc-component-BhmwWRgm.js";import"./rc-overflow-BSjmwJ5L.js";import"./rc-tabs-DzBt95t3.js";import"./rc-dropdown-Cpbpbr8d.js";import"./rc-menu-odk1-mql.js";import"./rc-select-BYP2ZpD4.js";import"./rc-virtual-list-Bi_WoJXF.js";import"./rc-field-form-W94e64e7.js";import"./rc-dialog-BcW66EVf.js";import"./rc-notification-Bk_9v6gO.js";import"./rc-table-DDN2Jo9n.js";import"./rc-tree-BGBWsLK6.js";import"./rc-checkbox-gkqbq-se.js";import"./scroll-into-view-if-needed-Bq0bK-M8.js";import"./compute-scroll-into-view-Bl8rNFhg.js";import"./rc-pagination-Bvz_Ru-I.js";import"./throttle-debounce-CUWDS_la.js";import"./rc-input-DdsdxYUa.js";import"./rc-picker-ctJ4hI_D.js";import"./rc-tooltip-aJh4r6ka.js";import"./rc-textarea-7R1xcK0F.js";import"./copy-to-clipboard-DhLP-jDv.js";import"./toggle-selection-BHUZwh74.js";import"./@emotion-CW87jbl0.js";import"./stylis-D5iaQeiq.js";import"./state-local-BBNhjlcY.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const p of i.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&r(p)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();class ee extends Q{constructor(){super("MenuDatabase");B(this,"menuConfigs");this.version(1).stores({menuConfigs:"++id, version, name, createdAt, updatedAt"})}}const b=new ee,v={async getAll(){return b.menuConfigs.orderBy("createdAt").reverse().toArray()},async getById(t){return b.menuConfigs.get(Number(t))},async searchByVersion(t){return b.menuConfigs.where("version").startsWithIgnoreCase(t).reverse().sortBy("createdAt")},async add(t){const s=new Date;return b.menuConfigs.add({...t,createdAt:s,updatedAt:s})},async update(t,s){await b.menuConfigs.update(Number(t),{...s,updatedAt:new Date})},async delete(t){await b.menuConfigs.delete(Number(t))},async deleteByVersion(t){const n=(await this.searchByVersion(t)).map(r=>r.id);await b.menuConfigs.bulkDelete(n)},async exportAll(){return this.getAll()},async importConfigs(t){await b.menuConfigs.bulkAdd(t.map(s=>({...s,id:void 0})))}},{confirm:te}=q,{Title:re}=R,{Option:se}=A,ne=()=>{const t=[{value:"",label:"å…¨éƒ¨ç‰ˆæœ¬"}],s=2025;for(let n=1;n<=12;n++)for(let r=1;r<=2;r++){const o=`${s}-${n}æœˆ${r}æœŸ`,i=`${s}å¹´${n}æœˆ${r}æœŸ`;t.push({value:o,label:i})}return t},oe=()=>{const[t,s]=h.useState([]),[n,r]=h.useState([]),[o,i]=h.useState(!1),p=$();h.useEffect(()=>{y()},[]);const y=async()=>{i(!0);try{const a=await v.getAll();s(a),r(a)}catch{c.error("åŠ è½½èœå•é…ç½®å¤±è´¥")}finally{i(!1)}},f=async a=>{if(!a){r(t);return}try{const g=await v.searchByVersion(a);r(g)}catch{c.error("ç­›é€‰å¤±è´¥")}},u=async a=>{try{await navigator.clipboard.writeText(a),c.success("JSONé…ç½®å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}catch{const C=document.createElement("textarea");C.value=a,document.body.appendChild(C),C.select(),document.execCommand("copy"),document.body.removeChild(C),c.success("JSONé…ç½®å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}},m=a=>{te({title:"ç¡®è®¤åˆ é™¤",content:"ç¡®å®šè¦åˆ é™¤è¿™ä¸ªèœå•é…ç½®å—ï¼Ÿ",okText:"åˆ é™¤",okType:"danger",cancelText:"å–æ¶ˆ",onOk:async()=>{try{await v.delete(a),c.success("åˆ é™¤æˆåŠŸ"),y()}catch{c.error("åˆ é™¤å¤±è´¥")}}})},j=[{title:"èœå•è·¯å¾„",dataIndex:"path",key:"path",width:250},{title:"è¿­ä»£ç‰ˆæœ¬å·",dataIndex:"version",key:"version",width:150},{title:"åˆ›å»ºæ—¶é—´",dataIndex:"createdAt",key:"createdAt",width:180,render:a=>new Date(a).toLocaleString()},{title:"æ›´æ–°æ—¶é—´",dataIndex:"updatedAt",key:"updatedAt",width:180,render:a=>new Date(a).toLocaleString()},{title:"æ“ä½œ",key:"action",width:240,render:(a,g)=>e.jsxs(k,{size:"small",children:[e.jsx(x,{size:"small",icon:e.jsx(N,{}),onClick:()=>u(g.jsonConfig),children:"å¤åˆ¶JSON"}),e.jsx(x,{size:"small",icon:e.jsx(T,{}),onClick:()=>p(`/edit/${g.id}`),children:"ç¼–è¾‘"}),e.jsx(x,{size:"small",danger:!0,icon:e.jsx(X,{}),onClick:()=>m(g.id.toString()),children:"åˆ é™¤"})]})}];return e.jsxs("div",{style:{padding:"24px",background:"#f5f5f5",minHeight:"100vh"},children:[e.jsxs(O,{style:{marginBottom:"24px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[e.jsx(re,{level:2,style:{margin:0,color:"#1890ff"},children:"ðŸ“‹ èœå•é…ç½®ç®¡ç†ç³»ç»Ÿ"}),e.jsx(x,{type:"primary",size:"large",icon:e.jsx(G,{}),onClick:()=>p("/add"),style:{borderRadius:"8px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",border:"none",boxShadow:"0 4px 12px rgba(102, 126, 234, 0.4)"},children:"æ–°å¢žèœå•"})]}),e.jsx("div",{style:{marginBottom:"20px"},children:e.jsx(A,{placeholder:"ðŸ” è¯·é€‰æ‹©è¿­ä»£ç‰ˆæœ¬å·ç­›é€‰",allowClear:!0,size:"large",onChange:f,style:{width:400},children:ne().map(a=>e.jsx(se,{value:a.value,children:a.label},a.value))})})]}),e.jsx(O,{style:{boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:e.jsx(W,{columns:j,dataSource:n,rowKey:"id",loading:o,pagination:{total:n.length,pageSize:10,showSizeChanger:!0,showQuickJumper:!0,showTotal:a=>`å…± ${a} æ¡è®°å½•`,style:{marginTop:"16px"}},style:{borderRadius:"8px"}})})]})},{Title:ie}=R,{Option:ae}=A,le=()=>{const t=[];for(let n=1;n<=12;n++)for(let r=1;r<=2;r++){const o=`${n}æœˆ${r}æœŸ`,i=`2025å¹´${n}æœˆ${r}æœŸ`;t.push({value:`2025-${o}`,label:i})}return t.sort((n,r)=>n.value.localeCompare(r.value))},L=()=>{const[t]=w.useForm(),[s,n]=h.useState(!1),[r,o]=h.useState(""),[i,p]=h.useState(""),y=$(),{id:f}=z(),u=!!f;h.useEffect(()=>{u&&f&&m(f)},[f,u]);const m=async d=>{n(!0);try{const l=await v.getById(d);l?(t.setFieldsValue({version:l.version,path:l.path}),o(l.jsonConfig)):(c.error("èœå•é…ç½®ä¸å­˜åœ¨"),y("/"))}catch{c.error("åŠ è½½èœå•é…ç½®å¤±è´¥"),y("/")}finally{n(!1)}},j=d=>{try{return JSON.parse(d),p(""),!0}catch{return p("JSONæ ¼å¼ä¸æ­£ç¡®"),!1}},a=d=>{const l=d||"";o(l),l.trim()?j(l):p("")},g=async d=>{if(!r.trim()){c.error("è¯·è¾“å…¥èœå•JSONé…ç½®");return}let l=r;if(l=r.replace(/hwsj/g,"touch"),!j(l)){c.error("JSONæ ¼å¼ä¸æ­£ç¡®ï¼Œè¯·æ£€æŸ¥åŽé‡è¯•");return}n(!0);try{u&&f?(await v.update(f,{...d,jsonConfig:l}),c.success("æ›´æ–°æˆåŠŸ")):(await v.add({...d,jsonConfig:l}),c.success("ä¿å­˜æˆåŠŸ")),y("/")}catch{c.error(u?"æ›´æ–°å¤±è´¥":"ä¿å­˜å¤±è´¥")}finally{n(!1)}},C=()=>{try{const d=JSON.parse(r),l=JSON.stringify(d,null,2);o(l),p(""),c.success("JSONæ ¼å¼åŒ–æˆåŠŸ")}catch{c.error("JSONæ ¼å¼ä¸æ­£ç¡®ï¼Œæ— æ³•æ ¼å¼åŒ–")}};return e.jsx("div",{style:{padding:"24px",background:"#f5f5f5",minHeight:"100vh"},children:e.jsxs("div",{style:{maxWidth:"1200px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:"24px",display:"flex",alignItems:"center"},children:[e.jsx(x,{icon:e.jsx(D,{}),onClick:()=>y("/"),style:{marginRight:"16px",borderRadius:"8px",border:"1px solid #d9d9d9"},children:"è¿”å›žåˆ—è¡¨"}),e.jsx(ie,{level:2,style:{margin:0,color:"#1890ff"},children:u?"âœï¸ ç¼–è¾‘èœå•é…ç½®":"âž• æ–°å¢žèœå•é…ç½®"})]}),e.jsx(O,{style:{boxShadow:"0 2px 8px rgba(0,0,0,0.1)",borderRadius:"12px"},children:e.jsxs(w,{form:t,layout:"vertical",onFinish:g,initialValues:{version:"",path:""},children:[e.jsx(w.Item,{label:"è¿­ä»£ç‰ˆæœ¬å·",name:"version",rules:[{required:!0,message:"è¯·é€‰æ‹©è¿­ä»£ç‰ˆæœ¬å·"}],children:e.jsx(A,{placeholder:"è¯·é€‰æ‹©è¿­ä»£ç‰ˆæœ¬å·",size:"large",showSearch:!0,filterOption:(d,l)=>{var J;return((J=l==null?void 0:l.children)==null?void 0:J.toString().toLowerCase().includes(d.toLowerCase()))||!1},style:{borderRadius:"8px"},children:le().map(d=>e.jsx(ae,{value:d.value,children:d.label},d.value))})}),e.jsx(w.Item,{label:"èœå•è·¯å¾„",name:"path",rules:[{required:!0,message:"è¯·è¾“å…¥èœå•è·¯å¾„"}],children:e.jsx(Y,{placeholder:"ä¾‹å¦‚ï¼š/user/management",size:"large",style:{borderRadius:"8px"}})}),e.jsxs(w.Item,{label:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"èœå•JSONé…ç½®"}),e.jsx(x,{size:"small",onClick:C,disabled:!r.trim(),style:{borderRadius:"6px"},children:"æ ¼å¼åŒ–JSON"})]}),required:!0,children:[e.jsx("div",{style:{border:"1px solid #d9d9d9",borderRadius:"8px",overflow:"hidden"},children:e.jsx(M,{height:"400px",defaultLanguage:"json",value:r,onChange:a,options:{minimap:{enabled:!1},scrollBeyondLastLine:!1,fontSize:14,wordWrap:"on",automaticLayout:!0},theme:"light"})}),i&&e.jsxs("div",{style:{color:"#ff4d4f",marginTop:"8px",fontSize:"14px"},children:["âŒ ",i]}),!r.trim()&&e.jsx("div",{style:{color:"#ff4d4f",marginTop:"8px",fontSize:"14px"},children:"âŒ è¯·è¾“å…¥èœå•JSONé…ç½®"})]}),e.jsx(w.Item,{children:e.jsx(x,{type:"primary",htmlType:"submit",loading:s,icon:e.jsx(Z,{}),size:"large",disabled:!!i||!r.trim(),style:{borderRadius:"8px",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",border:"none",boxShadow:"0 4px 12px rgba(102, 126, 234, 0.4)",height:"48px",fontSize:"16px"},children:u?"æ›´æ–°é…ç½®":"ä¿å­˜é…ç½®"})})]})})]})})},{Title:ce}=R,de=()=>{const[t,s]=h.useState(null),[n,r]=h.useState(!1),o=$(),{id:i}=z();h.useEffect(()=>{i&&p(i)},[i]);const p=async u=>{r(!0);try{const m=await v.getById(u);m?s(m):(c.error("èœå•é…ç½®ä¸å­˜åœ¨"),o("/"))}catch{c.error("åŠ è½½èœå•é…ç½®å¤±è´¥"),o("/")}finally{r(!1)}},y=async()=>{if(t)try{await navigator.clipboard.writeText(t.jsonConfig),c.success("JSONé…ç½®å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}catch{const m=document.createElement("textarea");m.value=t.jsonConfig,document.body.appendChild(m),m.select(),document.execCommand("copy"),document.body.removeChild(m),c.success("JSONé…ç½®å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}},f=async()=>{if(!t)return;const u={version:t.version,path:t.path,jsonConfig:JSON.parse(t.jsonConfig),createdAt:t.createdAt,updatedAt:t.updatedAt};try{await navigator.clipboard.writeText(JSON.stringify(u,null,2)),c.success("å®Œæ•´é…ç½®å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}catch{const j=document.createElement("textarea");j.value=JSON.stringify(u,null,2),document.body.appendChild(j),j.select(),document.execCommand("copy"),document.body.removeChild(j),c.success("å®Œæ•´é…ç½®å·²å¤åˆ¶åˆ°å‰ªè´´æ¿")}};return n?e.jsx("div",{style:{padding:"24px",textAlign:"center"},children:"åŠ è½½ä¸­..."}):t?e.jsxs("div",{style:{padding:"24px",maxWidth:"1200px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:"24px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(x,{icon:e.jsx(D,{}),onClick:()=>o("/"),style:{marginRight:"16px"},children:"è¿”å›žåˆ—è¡¨"}),e.jsx(ce,{level:2,style:{margin:0},children:"èœå•é…ç½®è¯¦æƒ…"})]}),e.jsxs(k,{children:[e.jsx(x,{icon:e.jsx(N,{}),onClick:f,children:"å¤åˆ¶å…¨éƒ¨"}),e.jsx(x,{type:"primary",icon:e.jsx(T,{}),onClick:()=>o(`/edit/${i}`),children:"ç¼–è¾‘é…ç½®"})]})]}),e.jsx(O,{style:{marginBottom:"24px"},children:e.jsxs(S,{title:"åŸºæœ¬ä¿¡æ¯",bordered:!0,column:2,children:[e.jsx(S.Item,{label:"èœå•è·¯å¾„",span:2,children:t.path}),e.jsx(S.Item,{label:"è¿­ä»£ç‰ˆæœ¬å·",children:t.version}),e.jsx(S.Item,{label:"é…ç½®ID",children:t.id}),e.jsx(S.Item,{label:"åˆ›å»ºæ—¶é—´",children:new Date(t.createdAt).toLocaleString()}),e.jsx(S.Item,{label:"æ›´æ–°æ—¶é—´",children:new Date(t.updatedAt).toLocaleString()})]})}),e.jsx(O,{title:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"JSONé…ç½®"}),e.jsx(x,{size:"small",icon:e.jsx(N,{}),onClick:y,children:"å¤åˆ¶JSON"})]}),children:e.jsx("div",{style:{border:"1px solid #d9d9d9",borderRadius:"6px"},children:e.jsx(M,{height:"500px",defaultLanguage:"json",value:t.jsonConfig,options:{readOnly:!0,minimap:{enabled:!1},scrollBeyondLastLine:!1,fontSize:14,wordWrap:"on",automaticLayout:!0},theme:"light"})})})]}):e.jsx("div",{style:{padding:"24px",textAlign:"center"},children:"èœå•é…ç½®ä¸å­˜åœ¨"})},ue=()=>e.jsx(H,{locale:K,children:e.jsx(U,{basename:"/menu-home",children:e.jsx("div",{className:"app",children:e.jsxs(_,{children:[e.jsx(I,{path:"/",element:e.jsx(oe,{})}),e.jsx(I,{path:"/add",element:e.jsx(L,{})}),e.jsx(I,{path:"/edit/:id",element:e.jsx(L,{})}),e.jsx(I,{path:"/detail/:id",element:e.jsx(de,{})})]})})})});P.createRoot(document.getElementById("root")).render(e.jsx(F.StrictMode,{children:e.jsx(ue,{})}));
